<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for contracts/Owned.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">contracts/</a> Owned.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">41.67% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>5/12</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">25% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>3/12</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">50% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>4/8</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">38.1% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>8/21</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">pragma solidity ^0.4.18;
import './Database.sol';
&nbsp;
// This contract handles owner authorization, freezing and access to critical functions
contract Owned {
&nbsp;
  Database public database;
&nbsp;
  // Constructor: Initiate database
  function Owned(address _database)
  noZeroAddress(_database)
  public {
    database = Database(_database);
  }
&nbsp;
&nbsp;
  // This function requires 2 of 3 owners to sign off on. Will replace one owner for another.
  // @Param: The address of the new owner address
  // @Param: The index of the new owner
  // @Param: The address of the first signer, who has approved the calling of this function
<span class="fstat-no" title="function not covered" >  function changeOwner(address _newOwner, address _oldOwner, address _functionSigner)</span>
  anyOwner
  noZeroAddress(_newOwner)
  noZeroAddress(_functionSigner)
  external {
<span class="cstat-no" title="statement not covered" >    require(msg.sender != _functionSigner)</span>;         // Check that this is different owner than the one who authorized
<span class="cstat-no" title="statement not covered" >    bytes32 functionHash = keccak256(this, _functionSigner, "changeOwner", keccak256(_newOwner))</span>;
<span class="cstat-no" title="statement not covered" >    require(database.boolStorage(functionHash))</span>;   // Check that fuction has been authorized to be called with these parameters
    database.setBool(functionHash, false);         // Reset changeOwner() authorization
    database.deleteBool(keccak256("owner", _oldOwner));      // Remove old owners privileges
    database.setBool(keccak256("owner", _newOwner), true);
<span class="cstat-no" title="statement not covered" >    LogOwnerChanged(_oldOwner, _newOwner, block.timestamp)</span>;
  }
&nbsp;
  // This function authorizes other owners to call critical functions such as selfdestruct or changeOwner() or add/remove contracts in ContractManager.
  // @Param: The address that will be used in the function requiring multisig capabilities. The critical functions often involve having a critical address change. If address is not critical any agreed address will work
  // Note: benefociary is used in case an attacker gains control of one owner wallet, they would need to also agree on the critical parameter, which if not of type bytes32, is keccak256(criticalParameter)
  function setFunctionAuthorized(address _contractAddress, string _functionName, bytes32 _beneficiary)
  external
  anyOwner
  returns (bool) {
    <span class="missing-if-branch" title="else path not taken" >E</span>require(bytes(_functionName).length != 0);
    database.setBool(keccak256(_contractAddress, msg.sender, _functionName, _beneficiary), true);    // Sign the function name + parameter
    LogFunctionAuthorized(msg.sender, _functionName, _beneficiary);
  }
&nbsp;
  // This will pause all critical activity for the supplied address
  // @Param: The address of the contract which is to be paused
<span class="fstat-no" title="function not covered" >  function pause(address _contract)</span>
  anyOwner
  noZeroAddress(_contract)
  MyBitContractOnly(_contract)
  public {
    database.setBool(keccak256("pause", _contract), true);
<span class="cstat-no" title="statement not covered" >    Pause(_contract, block.timestamp)</span>;
  }
&nbsp;
  // This will unpause all critical activity for the supplied address
  // @Param: The address of the contract which is to be unpaused
<span class="fstat-no" title="function not covered" >  function unpause(address _contract)</span>
  anyOwner
  public {
    database.setBool(keccak256("pause", _contract), false);
<span class="cstat-no" title="statement not covered" >    Unpause(_contract, block.timestamp)</span>;
  }
&nbsp;
  modifier anyOwner {
    <span class="missing-if-branch" title="else path not taken" >E</span>require(database.boolStorage(keccak256("owner", msg.sender)));
    _;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  modifier MyBitContractOnly(address _contract) </span>{
<span class="cstat-no" title="statement not covered" >    require(database.boolStorage(keccak256("contract", _contract)))</span>;    // Make sure this is a MyBitContract
    _;
  }
&nbsp;
  modifier noZeroAddress(address _param) {
    <span class="missing-if-branch" title="else path not taken" >E</span>require (_param != address(0));
    _;
  }
&nbsp;
  event Pause(address _contract, uint256 _timestamp);
  event Unpause(address _contract, uint256 _timestamp);
  event LogOwnerChanged(address indexed _previousOwner, address indexed _newOwner, uint256 indexed _timestamp);
  event LogFunctionAuthorized(address indexed _owner, string _functionName, bytes32 indexed _beneficiary);
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Tue Mar 27 2018 17:08:46 GMT+0200 (CEST)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
